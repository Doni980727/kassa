<!doctype html>

<html>

    <head>
        
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/slideshow.css">
        <link rel="stylesheet" type="text/css" href="css/shop.css">
        <link rel="stylesheet" type="text/css" href="css/styles.css">
        <link rel="stylesheet" type="text/css" href="css/modal.css">
        <script src="js/script.js"></script>
        <script>



            $(document).ready(function() {
            // grab the initial top offset of the navigation 
            var stickyNavTop = $('#navbar').offset().top;
            
            // our function that decides weather the navigation bar should have "fixed" css position or not.
            var stickyNav = function(){
                var scrollTop = $(window).scrollTop(); // our current vertical position from the top
                     
                // if we've scrolled more than the navigation, change its position to fixed to stick to top,
                // otherwise change it back to relative
                if (scrollTop > stickyNavTop) { 
                    $('#navbar').addClass('fixed');
                    document.getElementById("cart").style.zIndex = "2";
                    document.getElementById("main").style.marginTop = "70px";
                } else {
                    $('#navbar').removeClass('fixed'); 
                    document.getElementById("cart").style.zIndex = "1";
                    document.getElementById("main").style.paddingTop = "0px";
                }
            };

            stickyNav();
            // and run it again every time you scroll
            $(window).scroll(function() {
                stickyNav();
            });
        });

            /* Set the width of the side navigation to 250px and the left margin of the page content to 250px */
            function openNav() {
                document.getElementById("myShop").style.width = "20%";
                document.getElementById("main").style.marginRight = "20%";
                document.getElementById("myShop").style.zIndex = "3";
                
                

            }

            /* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
            function closeNav() {
                document.getElementById("myShop").style.width = "0";
                document.getElementById("main").style.marginRight = "0";
                
                

            }

            $(document).ready(function() {

                document.getElementById("myShop").style.width = "0";
                document.getElementById("main").style.marginRight = "0";

                document.getElementById("myShop").style.transition = "1s";

            });

         /* $(document).ready(function(){

                var result = 0;

                $(".add").click(function() {

                $(".status").replaceWith("<h3 class='status'>Din varukorg:</h3>");

                var datavalue = this.getAttribute("data-value");

                datavalueint = parseInt(datavalue);

                result = (result + datavalueint);

                $("#shopCart").append("<div class='shop-item'>"+ $(this).val() + "<p>"+ datavalue + "</p></div>");

                alert(result);

            });

            $("")



            }); */

            $(document).ready(function() {

                // Get the modal
                var modal = document.getElementById('myModal');

                // Get the button that opens the modal
                var btn = document.getElementById("myBtn");

                // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks the button, open the modal 
                btn.onclick = function() {
                    modal.style.display = "block";
                }

                // When the user clicks on <span> (x), close the modal
                span.onclick = function() {
                    modal.style.display = "none";
                }

                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }

            });
            
           

        </script>
    
    </head>
    
    <body>
        
        <header>
            <img id="cart" onclick="openNav()" src="images/ic_shopping_cart_black_48px.svg">
        
            <img id="header" src="http://via.placeholder.com/1920x300">
        
        </header>
        
        <nav class="navbar navbar-default" id="navbar">

			<div class="collapse navbar-collapse">

				<ul class="nav navbar-nav">
					
					<li><a href="#">Placeholder</a></li>
					<li><a href="#">Placeholder</a></li>
					<li><a href="#">Placeholder</a></li>
					<li><a href="#">Placeholder</a></li>

                </ul>
                
                <form clas="navbar-form">
                    
                    <div class="form-group">
                    
                        <input type="text" class="form-control search" name="search" placeholder="Search..">
                        
                    </div>
                    
                </form>

			</div>

	   </nav>
    
        <div id="myShop" class="shop">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><img id="closecart" src="images/ic_remove_shopping_cart_white_48px.svg"></a>
            
            <div id="shopCart">

                <ul id="show-cart">
                <li>???????</li>
            </ul>
            <div class="cart-count" style="color: white">You have <span style="color: white" id="count-cart">X</span> items in your cart</div>
            <div class="cart-count" style="color: white">Total Cart:$<span style="color: white" id="total-cart"></span></div>

            </div>

            <button id="myBtn" class="btn btn-primary cartBuy">Köp</button>
            
            <div id="myModal" class="modal">

              <!-- Modal content -->
              <div class="modal-content">
                  
                <span class="close">&times;</span>
                  
                <form>
                    
                    <div class="form-group">
                        
                        <label for="name">Förnamn:</label>
                        
                        <input type="text" class="form-control modal-control" id="name">
                        
                    </div>
                    
                    <div class="form-group">
                        
                        <label for="name">Efternamn:</label>
                        
                        <input type="text" class="form-control modal-control" id="name">
                        
                    </div>
                    
                    <div class="form-group">
                        
                        <label for="name">Adress:</label>
                        
                        <input type="text" class="form-control modal-control" id="name">
                        
                    </div>
                    
                    <div class="form-group">
                        
                        <label for="name">Postnummer:</label>
                        
                        <input type="text" class="form-control modal-control" id="name">
                        
                    </div>
                    
                    <div class="form-group">
                        
                        <label for="name">Stad:</label>
                        
                        <input type="text" class="form-control modal-control" id="name">
                        
                    </div>
                    
                </form>
                  
              </div>

            </div>
            
        </div>
        
        <div id="mySidenav" class="sidenav">
            <a href="index.html" id="about">Home</a>
            <a href="shop.html" id="blog">Shop</a>
            <a href="#" id="projects">About</a>
            <a href="#" id="contact">Contact</a>
        </div>

        <!-- Use any element to open the sidenav -->
        
        <div class="container-fluid" id="main">
        
            <div class="row">
                
                <div class="col-xs-11 col-sm-4 col-md-4 col-lg-2">

                    <div class="thumbnail">

                      <img src="http://via.placeholder.com/300x250" alt="Card image cap">

                        <div class="caption">

                            <h3>Product title</h3>

                            <p>Description.</p><br/>

                            <p class="card-text"><a class="add-to-cart" href="#" data-name="Box" data-price="5.00"><button class="btn btn-primary">Köp</button></a> $5.00 </p>

                        </div>

                    </div>

                 </div>
                
            </div>
        
        </div>
        
        <script src="js/shoppingCart.js"></script>

        <script>

            $(".add-to-cart").click(function(event){
                event.preventDefault();
                var name = $(this).attr("data-name");
                var price = Number($(this).attr("data-price"));

                shoppingCart.addItemToCart(name, price, 1);
                displayCart();
            });

            $("#clear-cart").click(function(event){
                shoppingCart.clearCart();
                displayCart();
            });

            function displayCart() {
                var cartArray = shoppingCart.listCart();
                console.log(cartArray);
                var output = "";

                for (var i in cartArray) {
                    output += " <div class='row'> <div class='col-lg-10'>"
                        +cartArray[i].name
                        +" &times; "+cartArray[i].price
                        +" = "+cartArray[i].total
                        +"<div class='input-group'>"
                        +" <input class='item-count form-control' type='text' data-name='"
                        +cartArray[i].name
                        +"' value='"+cartArray[i].count+"'> "
                        +"<div class='input-group-btn'> "
                        +" <button type='button' class='plus-item btn btn-default' data-name='"
                        +cartArray[i].name+"'>+</button>"
                        +" <button type='button' class='subtract-item btn btn-default' data-name='"
                        +cartArray[i].name+"'>-</button>"
                        +" <button type='button' class='delete-item btn btn-default' data-name='"
                        +cartArray[i].name+"'>&times;</button>"
                        +"</div>"
                        +" </div> </div> </div>";
                }

                $("#show-cart").html(output);
                $("#count-cart").html( shoppingCart.countCart() );
                $("#total-cart").html( shoppingCart.totalCart() );
            }

            $("#show-cart").on("click", ".delete-item", function(event){
                var name = $(this).attr("data-name");
                shoppingCart.removeItemFromCartAll(name);
                displayCart();
            });

            $("#show-cart").on("click", ".subtract-item", function(event){
                var name = $(this).attr("data-name");
                shoppingCart.removeItemFromCart(name);
                displayCart();
            });

            $("#show-cart").on("click", ".plus-item", function(event){
                var name = $(this).attr("data-name");
                shoppingCart.addItemToCart(name, 0, 1);
                displayCart();
            });

            $("#show-cart").on("change", ".item-count", function(event){
                var name = $(this).attr("data-name");
                var count = Number($(this).val());
                shoppingCart.setCountForItem(name, count);
                displayCart();
            });


            displayCart();

        </script>
    
    </body>

</html>